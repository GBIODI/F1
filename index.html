<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿A Quién Elijo? - F1 Edition</title>
    
    <!-- Carga de Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Carga de la fuente Inter --><link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* ... (Estilos CSS sin cambios) ... */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* bg-gray-900 */
        }
        .character-card {
            perspective: 1000px;
            cursor: pointer;
        }
        .card-inner {
            position: relative;
            width: 100%;
            aspect-ratio: 1 / 1; 
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .character-card.is-flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        #mystery-card-container {
            aspect-ratio: 1 / 1;
        }
        /* Estilo para el dropdown deshabilitado */
        select:disabled {
            background-color: #4B5563; /* bg-gray-600 */
            opacity: 0.7;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen p-4 sm:p-8">

    <header class="max-w-7xl mx-auto mb-6">
        <div class="flex flex-col sm:flex-row justify-between items-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-center text-blue-300 mb-4 sm:mb-0">
                ¿A Quién Elijo? - F1 Edition
            </h1>
            
            <!-- Botón de Reinicio --><button id="reset-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow-md transition-colors duration-300">
                Reiniciar Juego
            </button>
        </div>
    </header>

    <main class="max-w-7xl mx-auto flex flex-col md:flex-row gap-6">
        
        <!-- Sección del Tablero de Juego --><section class="w-full md:w-3/4">
            
            <!-- Cuadrícula del tablero (4 columnas en escritorio, 2 en móvil) --><div id="game-board" class="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-5">
                <!-- Las cartas se generarán aquí por JavaScript --></div>
        </section>

        <!-- Panel Lateral para el Personaje Secreto --><aside class="w-full md:w-1/4">
            <div class="bg-gray-800 p-4 rounded-lg shadow-lg sticky top-8">
                <h2 class="text-2xl font-bold text-blue-300 mb-4">Mi Piloto</h2>
                <div class="space-y-4">
                    <label for="character-select" class="block text-sm font-medium text-gray-300">Elige tu piloto secreto:</label>
                    
                    <!-- Menú desplegable de selección --><select id="character-select" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-300">
                        <option value="">-- Elige un piloto --</option>
                        <!-- Las opciones se generarán aquí por JavaScript --></select>
                    
                    <!-- NUEVO BOTÓN DE CONFIRMAR --><button id="lock-button" class="hidden w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all duration-300">
                        Confirmar Piloto
                    </button>
                    
                    <!-- Contenedor de la imagen secreta --><div id="mystery-card-container" class="bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden border-4 border-gray-600">
                        <!-- Placeholder 1:1 --><img id="mystery-card-image" src="https://placehold.co/300x300/4B5563/9CA3AF?text=?" alt="Piloto misterioso" class="w-full h-full object-cover transition-opacity duration-300">
                    </div>
                </div>
            </div>
        </aside>

    </main>

    <script>
        // Objeto con los personajes y sus URLs (APUNTANDO A LA CARPETA LOCAL 'imagenes/')
        const characters = [
            // Fila 1
            { name: "Oscar Piastri", imageUrl: "imagenes/Piastri.png" },
            { name: "Lando Norris", imageUrl: "imagenes/Norris.png" },
            { name: "Charles Leclerc", imageUrl: "imagenes/Leclerc.png" },
            { name: "Lewis Hamilton", imageUrl: "imagenes/Hamilton.png" },
            // Fila 2
            { name: "George Russell", imageUrl: "imagenes/Russell.png" },
            { name: "Kimi Antonelli", imageUrl: "imagenes/Antonelli.png" },
            { name: "Max Verstappen", imageUrl: "imagenes/Verstappen.png" },
            { name: "Yuki Tsunoda", imageUrl: "imagenes/Tsunoda.png" },
            // Fila 3
            { name: "Alexander Albon", imageUrl: "imagenes/Albon.png" },
            { name: "Carlos Sainz", imageUrl: "imagenes/Sainz.png" },
            { name: "Liam Lawson", imageUrl: "imagenes/Lawson.png" },
            { name: "Isack Hadjar", imageUrl: "imagenes/Hadjar.png" },
            // Fila 4
            { name: "Lance Stroll", imageUrl: "imagenes/Stroll.png" },
            { name: "Fernando Alonso", imageUrl: "imagenes/Alonso.png" },
            { name: "Esteban Ocon", imageUrl: "imagenes/Ocon.png" },
            { name: "Oliver Bearman", imageUrl: "imagenes/Bearman.png" },
            // Fila 5
            { name: "Nico Hulkenberg", imageUrl: "imagenes/Hulkenberg.png" },
            { name: "Gabriel Bortoleto", imageUrl: "imagenes/Bortoleto.png" },
            { name: "Pierre Gasly", imageUrl: "imagenes/Gasly.png" },
            { name: "Franco Colapinto", imageUrl: "imagenes/Colapinto.png" }
        ];

        // Se ejecuta cuando el contenido del HTML está cargado
        document.addEventListener('DOMContentLoaded', () => {
            const gameBoard = document.getElementById('game-board');
            const resetButton = document.getElementById('reset-button');
            const characterSelect = document.getElementById('character-select');
            const mysteryCardImage = document.getElementById('mystery-card-image');
            
            // --- NUEVO ELEMENTO ---
            const lockButton = document.getElementById('lock-button');
            
            // Placeholder 1:1
            const placeholderImage = "https://placehold.co/300x300/4B5563/9CA3AF?text=Selecciona+un+piloto"; 
            // URL del logo de F1 (APUNTANDO A LA CARPETA LOCAL 'imagenes/')
            const f1LogoBack = "imagenes/logo-f1.png"; 

            // Función para crear el tablero (sin cambios)
            function createBoard() {
                gameBoard.innerHTML = ''; 
                characters.forEach(character => {
                    const card = document.createElement('div');
                    card.className = 'character-card';
                    card.setAttribute('role', 'button');
                    card.setAttribute('aria-label', `Carta de ${character.name}`);
                    const cardInner = document.createElement('div');
                    cardInner.className = 'card-inner';
                    const cardFront = document.createElement('div');
                    cardFront.className = 'card-front bg-white border-4 border-gray-300 rounded-lg shadow-lg';
                    const img = document.createElement('img');
                    img.src = character.imageUrl;
                    img.alt = `Imagen de ${character.name}`;
                    img.className = 'w-full h-full object-cover';
                    cardFront.appendChild(img);
                    const cardBack = document.createElement('div');
                    cardBack.className = 'card-back border-4 border-red-900 rounded-lg shadow-lg flex items-center justify-center';
                    const f1LogoImg = document.createElement('img');
                    f1LogoImg.src = f1LogoBack;
                    f1LogoImg.alt = "Logo F1";
                    f1LogoImg.className = 'w-full h-full object-cover'; 
                    cardBack.appendChild(f1LogoImg);
                    cardInner.appendChild(cardFront);
                    cardInner.appendChild(cardBack);
                    card.appendChild(cardInner);
                    card.addEventListener('click', () => {
                        card.classList.toggle('is-flipped');
                    });
                    gameBoard.appendChild(card);
                });
            }

            // --- FUNCIÓN RESETGAME (ACTUALIZADA) ---
            function resetGame() {
                const flippedCards = document.querySelectorAll('.character-card.is-flipped');
                flippedCards.forEach(card => {
                    card.classList.remove('is-flipped');
                });

                // Reinicia el selector y la imagen
                characterSelect.value = ""; 
                mysteryCardImage.src = placeholderImage;
                mysteryCardImage.alt = "Piloto misterioso";
                
                // --- NUEVAS LÍNEAS ---
                characterSelect.disabled = false; // Habilita el dropdown
                lockButton.classList.add('hidden'); // Oculta el botón de confirmar
            }

            // Función para llenar el menú desplegable (sin cambios)
            function populateSelect() {
                characterSelect.innerHTML = '<option value="">-- Elige un piloto --</option>'; 
                characters.forEach(character => {
                    const option = document.createElement('option');
                    option.value = character.name;
                    option.textContent = character.name;
                    characterSelect.appendChild(option);
                });
            }

            // --- FUNCIÓN HANDLECHARACTERSELECT (ACTUALIZADA) ---
            function handleCharacterSelect(event) {
                const selectedName = event.target.value;

                if (selectedName === "") {
                    mysteryCardImage.src = placeholderImage;
                    mysteryCardImage.alt = "Piloto misterioso";
                    // --- NUEVA LÍNEA ---
                    lockButton.classList.add('hidden'); // Oculta el botón si no hay selección
                    return;
                }

                const selectedCharacter = characters.find(char => char.name === selectedName);
                
                if (selectedCharacter) {
                    mysteryCardImage.src = selectedCharacter.imageUrl;
                    mysteryCardImage.alt = `Piloto elegido: ${selectedCharacter.name}`;
                    // --- NUEVA LÍNEA ---
                    lockButton.classList.remove('hidden'); // Muestra el botón de confirmar
                }
            }
            
            // --- NUEVA FUNCIÓN ---
            // Se ejecuta al hacer clic en "Confirmar Piloto"
            function lockChoice() {
                characterSelect.disabled = true; // Deshabilita el dropdown
                lockButton.classList.add('hidden'); // Oculta el botón
            }

            // Asignar eventos
            resetButton.addEventListener('click', resetGame);
            characterSelect.addEventListener('change', handleCharacterSelect);
            
            // --- NUEVO EVENTO ---
            lockButton.addEventListener('click', lockChoice);

            // Inicializar el juego
            createBoard();
            populateSelect(); 
        });
    </script>
</body>
</html>
